matrix:
  include:
  - language: objective-c
    os: osx
    osx_image: xcode9
    before_script:
    - chmod -R +x ./scripts
    - chmod +x ./tests/gradlew
    script:
    - cd app
    - "../scripts/output.sh 'Preparing The Application for Upload...'"
    - xcodebuild -target ExperiBank -configuration Debug -destination 'platform=iOS,OS=9.1'
      CODE_SIGN_IDENTITY="" CODE_SIGNING_REQUIRED=NO
    - "../scripts/output.sh 'Application Built Successfully...'"
    - cd ..
    - "./scripts/output.sh 'Preparing The Application for Upload...'"
    - "./scripts/zip-app.sh ExperiBank.app ExperiBank"
    - "./scripts/output.sh 'Uploading The Application...'"
    - "./scripts/upload-app.sh"
    - "./scripts/output.sh 'Successfully Uploaded The Application...'"
    - "./scripts/output.sh 'Running Tests...'"
    - cd tests
    - "./gradlew clean build -i --continue"
    - cd ..
    - "./scripts/output.sh 'Sednding Build Status to Slack...'"
notifications:
  slack:
    rooms:
      secure: aazLBGNnTihrbwdiusFQ16eMM1RhE4dKhYRh/gKrsftM1ETWYYdXPtfFnpNYL0duIAsmN19wltYrH5SDWeFf1bnKTKRd1HDpeQEwjXxnqYwsStpK55yfjzRemLkaWT27qhG3YOyRU0AnVPLSyvHWCQs2nZ0BhRe13SkGf0jeKcXJxecDVCZcxX6JD1IM/f1RKqetcJIpP6N+jOAj+JqBgU7IwlG9ttSAeJjGLAj53zuUXHhJ9PCk0yQ8rTnbUEAZxLbENMFSYB49iGLOg6PngN8GIqEPZab3SivsR9I8ylvgkeiE0byxefaHS48m+Z5w96pWHZx+Mblyc7/WJVp6O/F+hD95IfzDhS0khpQwwy6KEYYuteJgzIcfirV1LBCi01MYSrhSkHvm+cT7usMgF0gXyzmcAjUbLSX8BQC+Gyz0LKGTiPdlRgMO3fdaXnzH2rh+f+u1jLc63sxIqUTtSnBnX4EQpS3wM0NvjXdEypXZBWpDr91qfBungaW6jiKfkOvPyKbtAfsV3n9dO5krq9EtdGmDQ7f3HtMJz/F7TBzGW7hNwFjX94VeOVnHOPd9Qy5QT2XKD1cYKHuuto84Yqjs3Z/jJTvmuDTeTc1YlK00gmt/pnhk+pB08j1hyp8cUS+L7/UIyp5kcm+ECKY3PYIVDktRVa6mRQsDtE6Ci0Y=
after_success:
- "./scripts/merge.sh"
